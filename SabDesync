--------------------------------------------------------------------
-- FULL FINAL COMBINED SCRIPT ‚Äî CLEAN ‚Ä¢ MODERN ‚Ä¢ NEON ‚Ä¢ COMPACT
-- by ChatGPT for vexx.blox
--------------------------------------------------------------------

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local isTeleporting = false
local noclipEnabled = false
local noclipConn = nil

local fastStealOn = false
local fastStealLoop = nil
local fastStealConn = nil


--------------------------------------------------------------------
-- UTILITIES
--------------------------------------------------------------------

local function getCharacter()
	local char = LocalPlayer.Character
	if not char or not char.Parent then
		char = LocalPlayer.CharacterAdded:Wait()
	end
	return char
end

local function getMyPlot()
	local plots = workspace:FindFirstChild("Plots")
	if not plots then return nil end

	for _, plot in ipairs(plots:GetChildren()) do
		local label = plot:FindFirstChild("PlotSign")
			and plot.PlotSign:FindFirstChild("SurfaceGui")
			and plot.PlotSign.SurfaceGui:FindFirstChild("Frame")
			and plot.PlotSign.SurfaceGui.Frame:FindFirstChild("TextLabel")

		if label then
			local t = (label.ContentText or label.Text or "")
			if t:find(LocalPlayer.DisplayName) and t:find("Base") then
				return plot
			end
		end
	end

	return nil
end

local function getDeliveryHitbox()
	local myPlot = getMyPlot()
	if not myPlot then return nil end

	local delivery = myPlot:FindFirstChild("DeliveryHitbox") or myPlot:FindFirstChild("DeliveryHitbox", true)
	if delivery and delivery:IsA("BasePart") then
		return delivery
	end

	return nil
end


--------------------------------------------------------------------
-- NOCLIP
--------------------------------------------------------------------

local function setNoclip(on)
	noclipEnabled = on

	if on then
		if noclipConn then noclipConn:Disconnect() end

		noclipConn = RunService.Stepped:Connect(function()
			local char = LocalPlayer.Character
			if not char then return end
			for _, part in ipairs(char:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
				end
			end
		end)

	else
		if noclipConn then
			noclipConn:Disconnect()
			noclipConn = nil
		end

		local char = LocalPlayer.Character
		if char then
			for _, part in ipairs(char:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = true
				end
			end
		end
	end
end


--------------------------------------------------------------------
-- TELEPORT SYSTEM
--------------------------------------------------------------------

local function shortTeleportFreezeCamera(targetCF, duration)
	if isTeleporting then return end
	isTeleporting = true

	duration = math.clamp(duration or 0.2, 0.1, 0.5)

	local char = getCharacter()
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not hrp then isTeleporting = false return end

	local cam = workspace.CurrentCamera
	if not cam then isTeleporting = false return end

	local originalCamCF = cam.CFrame
	local originalType = cam.CameraType
	local originalSub = cam.CameraSubject
	local originalHRPCF = hrp.CFrame

	local function restore()
		local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if hum then
			cam.CameraType = Enum.CameraType.Custom
			cam.CameraSubject = hum
		else
			cam.CameraType = originalType
			cam.CameraSubject = originalSub
		end

		cam.CFrame = originalCamCF
	end

	local ok = pcall(function()
		cam.CameraType = Enum.CameraType.Scriptable
		cam.CFrame = originalCamCF
		hrp.CFrame = targetCF
		task.wait(duration)
		hrp.CFrame = originalHRPCF
	end)

	restore()
	isTeleporting = false
end

local function doInstantSteal()
	local char = getCharacter()
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	local delivery = getDeliveryHitbox()
	if not delivery then return end

	local targetCF = delivery.CFrame 
		+ delivery.CFrame.LookVector * 3 
		+ Vector3.new(0, 3, 0)

	shortTeleportFreezeCamera(targetCF, 0.25)
end

local function doForwardTP()
	local char = getCharacter()
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	hrp.CFrame = hrp.CFrame + hrp.CFrame.LookVector * 8
end


--------------------------------------------------------------------
-- FAST STEAL
--------------------------------------------------------------------

local function patchPrompt(prompt)
	if not prompt:IsA("ProximityPrompt") then return end
	pcall(function()
		if prompt.HoldDuration > 0.01 then
			prompt.HoldDuration = 0.01
		end
	end)
end

local function setFastSteal(on)
	fastStealOn = on

	if on then
		for _, obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("ProximityPrompt") then
				patchPrompt(obj)
			end
		end

		if fastStealConn then fastStealConn:Disconnect() end
		fastStealConn = workspace.DescendantAdded:Connect(function(obj)
			if obj:IsA("ProximityPrompt") then
				patchPrompt(obj)
			end
		end)

		if not fastStealLoop then
			fastStealLoop = task.spawn(function()
				while fastStealOn do
					for _, obj in ipairs(workspace:GetDescendants()) do
						if obj:IsA("ProximityPrompt") then
							patchPrompt(obj)
						end
					end
					task.wait(0.08)
				end
				fastStealLoop = nil
			end)
		end

	else
		if fastStealConn then fastStealConn:Disconnect() fastStealConn = nil end
	end
end


--------------------------------------------------------------------
-- MODERN NEON UI
--------------------------------------------------------------------

local function createUI()
	local guiParent = game:GetService("CoreGui")
	pcall(function()
		if gethui then local h=gethui(); if h then guiParent=h end end
	end)

	local old = guiParent:FindFirstChild("SAB_Utils_UI")
	if old then old:Destroy() end

	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "SAB_Utils_UI"
	screenGui.IgnoreGuiInset = true
	screenGui.Parent = guiParent

	----------------------------------------------------------------
	-- MAIN FRAME (COMPACT + NEON)
	----------------------------------------------------------------

	local mainFrame = Instance.new("Frame")
	mainFrame.Size = UDim2.new(0, 165, 0, 190)
	mainFrame.Position = UDim2.new(0.72, -80, 0.50, -95)
	mainFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 28)
	mainFrame.Parent = screenGui
	Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

	local gradient = Instance.new("UIGradient")
	gradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(120, 0, 255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 0, 120))
	})
	gradient.Rotation = 90
	gradient.Parent = mainFrame

	----------------------------------------------------------------
	-- HEADER
	----------------------------------------------------------------

	local header = Instance.new("Frame")
	header.Size = UDim2.new(1, 0, 0, 36)
	header.BackgroundColor3 = Color3.fromRGB(30, 0, 50)
	header.Parent = mainFrame
	Instance.new("UICorner", header).CornerRadius = UDim.new(0, 12)

	local title = Instance.new("TextLabel")
	title.BackgroundTransparency = 1
	title.Size = UDim2.new(1, -12, 1, 0)
	title.Position = UDim2.new(0, 10, 0, 0)
	title.Font = Enum.Font.GothamBold
	title.Text = "vexx.blox"
	title.TextColor3 = Color3.fromRGB(255, 255, 255)
	title.TextSize = 15
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.Parent = header

	local close = Instance.new("TextButton")
	close.Size = UDim2.new(0, 22, 0, 22)
	close.Position = UDim2.new(1, -26, 0.5, -11)
	close.Font = Enum.Font.GothamBold
	close.Text = "‚úï"
	close.TextSize = 14
	close.TextColor3 = Color3.fromRGB(255, 255, 255)
	close.BackgroundColor3 = Color3.fromRGB(75, 0, 120)
	close.Parent = header
	Instance.new("UICorner", close).CornerRadius = UDim.new(1, 0)

	close.MouseButton1Click:Connect(function()
		screenGui:Destroy()
	end)


	----------------------------------------------------------------
	-- BUTTON LAYOUT (VERTICAL ‚Ä¢ COMPACT)
	----------------------------------------------------------------

	local body = Instance.new("Frame")
	body.Size = UDim2.new(1, -10, 1, -48)
	body.Position = UDim2.new(0, 5, 0, 42)
	body.BackgroundTransparency = 1
	body.Parent = mainFrame

	local list = Instance.new("UIListLayout")
	list.Parent = body
	list.SortOrder = Enum.SortOrder.LayoutOrder
	list.Padding = UDim.new(0, 6)
	list.HorizontalAlignment = Enum.HorizontalAlignment.Center


	local function makeIconButton(text, emoji)
		local btn = Instance.new("TextButton")
		btn.Size = UDim2.new(1, 0, 0, 32)
		btn.BackgroundColor3 = Color3.fromRGB(50, 0, 100)
		btn.Font = Enum.Font.GothamBold
		btn.Text = emoji .. "  " .. text
		btn.TextSize = 13
		btn.TextColor3 = Color3.fromRGB(240, 220, 255)
		btn.Parent = body
		Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
		return btn
	end

	local tpBtn      = makeIconButton("TP BUTTON", "‚ö°")
	local fwdBtn     = makeIconButton("TP FORWARD", "‚û°Ô∏è")
	local noclipBtn  = makeIconButton("NOCLIP: OFF", "üü£")
	local fastBtn    = makeIconButton("FAST STEAL: OFF", "üí®")


	----------------------------------------------------------------
	-- TOGGLE BUTTON (SIDE)
	----------------------------------------------------------------

	local toggle = Instance.new("TextButton")
	toggle.Size = UDim2.new(0, 34, 0, 34)
	toggle.Position = UDim2.new(0.01, 0, 0.5, -17)
	toggle.BackgroundColor3 = Color3.fromRGB(50, 0, 80)
	toggle.Font = Enum.Font.GothamBold
	toggle.Text = "‚â°"
	toggle.TextSize = 16
	toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
	toggle.Parent = screenGui
	Instance.new("UICorner", toggle).CornerRadius = UDim.new(1, 0)

	toggle.MouseButton1Click:Connect(function()
		mainFrame.Visible = not mainFrame.Visible
		toggle.Text = mainFrame.Visible and "‚â°" or "‚ñ∂"
	end)


	----------------------------------------------------------------
	-- BUTTON LOGIC
	----------------------------------------------------------------

	tpBtn.MouseButton1Click:Connect(doInstantSteal)
	fwdBtn.MouseButton1Click:Connect(doForwardTP)

	noclipBtn.MouseButton1Click:Connect(function()
		setNoclip(not noclipEnabled)
		if noclipEnabled then
			noclipBtn.Text = "üü£  NOCLIP: ON"
			noclipBtn.BackgroundColor3 = Color3.fromRGB(140, 0, 255)
		else
			noclipBtn.Text = "üü£  NOCLIP: OFF"
			noclipBtn.BackgroundColor3 = Color3.fromRGB(50, 0, 100)
		end
	end)

	fastBtn.MouseButton1Click:Connect(function()
		setFastSteal(not fastStealOn)
		if fastStealOn then
			fastBtn.Text = "üí®  FAST STEAL: ON"
			fastBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 255)
		else
			fastBtn.Text = "üí®  FAST STEAL: OFF"
			fastBtn.BackgroundColor3 = Color3.fromRGB(50, 0, 100)
		end
	end)
end


--------------------------------------------------------------------
-- RUN UI
--------------------------------------------------------------------

createUI()
